{"ast":null,"code":"var _jsxFileName = \"/Users/cfafrica/Desktop/vercel-monorepo-setup/apps/promiseTracker/src/pages/index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Hero from \"../components/Hero\";\nimport ActNow from \"../components/ActNow\";\nimport KeyPromises from \"../components/KeyPromises\";\nimport LatestArticles from \"../components/LatestArticles\";\nimport LatestPromises from \"../components/LatestPromises\";\nimport Page from \"../components/Page\";\nimport Partners from \"../components/Partners\";\nimport Subscribe from \"../components/Newsletter\";\nimport check from \"../lib/check\";\nimport i18n from \"../lib/i18n\";\nimport wp from \"../lib/wp\";\nimport { groupPromisesByStatus } from \"../utils\";\nconst useStyles = makeStyles(({\n  breakpoints,\n  typography,\n  widths\n}) => ({\n  section: {\n    padding: `0 ${typography.pxToRem(23)}`,\n    margin: 0,\n    width: \"100%\",\n    [breakpoints.up(\"lg\")]: {\n      padding: 0,\n      margin: \"0 auto\",\n      width: typography.pxToRem(widths.values.lg)\n    }\n  },\n  footer: {\n    marginTop: 0\n  }\n}));\n\nfunction Index(_ref) {\n  let {\n    actNow,\n    articles,\n    criteria,\n    footer,\n    navigation,\n    partners,\n    promiseStatuses,\n    promises,\n    projectMeta,\n    keyPromises,\n    promisesByStatus,\n    subscribe\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"actNow\", \"articles\", \"criteria\", \"footer\", \"navigation\", \"partners\", \"promiseStatuses\", \"promises\", \"projectMeta\", \"keyPromises\", \"promisesByStatus\", \"subscribe\"]);\n\n  const classes = useStyles(props);\n  return __jsx(Page, _extends({}, props, {\n    footer: footer,\n    navigation: navigation,\n    classes: {\n      section: classes.section,\n      footer: classes.footer\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }), __jsx(Hero, {\n    promisesByStatus: promisesByStatus,\n    criteria: criteria,\n    name: projectMeta.name,\n    position: projectMeta.position,\n    promiseLabel: projectMeta.promiseLabel,\n    updatedAtLabel: projectMeta.updatedAtLabel,\n    trailText: projectMeta.trailText,\n    updatedAt: new Date(projectMeta.updatedAt).toDateString({\n      dateStyle: \"short\"\n    }).split(\" \").slice(1).join(\" \"),\n    title: projectMeta.description,\n    classes: {\n      section: classes.section\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }), __jsx(KeyPromises, {\n    actionLabel: \"Learn More\",\n    items: keyPromises,\n    title: \"Key Promises\",\n    classes: {\n      section: classes.section\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }), __jsx(LatestPromises, {\n    actionLabel: \"See All\",\n    items: promises.slice(0, 6),\n    title: \"Latest Promises\",\n    classes: {\n      section: classes.section\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }), __jsx(ActNow, _extends({}, actNow, {\n    classes: {\n      section: classes.section\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  })), __jsx(LatestArticles, {\n    actionLabel: \"See All\",\n    items: articles,\n    title: \"Latest Articles\",\n    classes: {\n      section: classes.section\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }), __jsx(Partners, _extends({}, partners, {\n    title: \"Partners\",\n    classes: {\n      section: classes.section\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  })), __jsx(Subscribe, _extends({}, subscribe, {\n    classes: {\n      section: classes.section\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  })));\n}\n\nIndex.propTypes = {\n  actNow: PropTypes.shape({}),\n  articles: PropTypes.arrayOf(PropTypes.shape({})),\n  criteria: PropTypes.shape({}),\n  footer: PropTypes.shape({}),\n  navigation: PropTypes.shape({}),\n  partners: PropTypes.shape({}),\n  projectMeta: PropTypes.shape({\n    name: PropTypes.string,\n    position: PropTypes.string,\n    trailText: PropTypes.string,\n    updatedAt: PropTypes.string,\n    updatedAtLabel: PropTypes.string,\n    description: PropTypes.string,\n    promiseLabel: PropTypes.string\n  }),\n  promiseStatuses: PropTypes.arrayOf(PropTypes.shape({})),\n  promises: PropTypes.arrayOf(PropTypes.shape({})),\n  keyPromises: PropTypes.arrayOf(PropTypes.shape({})),\n  promisesByStatus: PropTypes.arrayOf(PropTypes.shape({})),\n  subscribe: PropTypes.shape({})\n};\nIndex.defaultProps = {\n  actNow: undefined,\n  articles: undefined,\n  criteria: undefined,\n  footer: undefined,\n  navigation: undefined,\n  partners: undefined,\n  promiseStatuses: undefined,\n  promises: undefined,\n  keyPromises: undefined,\n  promisesByStatus: undefined,\n  subscribe: undefined,\n  projectMeta: undefined\n};\nexport async function getStaticProps({\n  locale\n}) {\n  const _ = i18n(); // Skip generating pages for unsupported locales\n\n\n  if (!_.locales.includes(locale)) {\n    return {\n      notFound: true\n    };\n  }\n\n  const wpApi = wp();\n  const page = await wpApi.pages({\n    slug: \"index\",\n    locale\n  }).first;\n  const {\n    promiseStatuses\n  } = page;\n  const checkApi = check({\n    promiseStatuses,\n    team: \"pesacheck-promise-tracker\"\n  });\n  const promises = await checkApi.promises({\n    limit: 10000,\n    query: `{ \"projects\": [\"2831\"] }`\n  });\n  const keyPromises = await checkApi.promises({\n    limit: 6,\n    query: `{ \"projects\": [\"4691\"] }`\n  });\n  const posts = await wpApi.pages({\n    slug: \"analysis-articles\",\n    locale\n  }).posts;\n  const articles = (posts === null || posts === void 0 ? void 0 : posts.slice(0, 4)) || null;\n  const projectMeta = await checkApi.projectMeta();\n\n  const languageAlternates = _.languageAlternates();\n\n  return {\n    props: _objectSpread(_objectSpread({}, page), {}, {\n      articles,\n      keyPromises,\n      languageAlternates,\n      promises: promises.slice(0, 6),\n      promisesByStatus: groupPromisesByStatus(promises),\n      projectMeta\n    }),\n    revalidate: 2 * 60 // seconds\n\n  };\n}\nexport default Index;","map":{"version":3,"sources":["/Users/cfafrica/Desktop/vercel-monorepo-setup/apps/promiseTracker/src/pages/index.js"],"names":["React","PropTypes","makeStyles","Hero","ActNow","KeyPromises","LatestArticles","LatestPromises","Page","Partners","Subscribe","check","i18n","wp","groupPromisesByStatus","useStyles","breakpoints","typography","widths","section","padding","pxToRem","margin","width","up","values","lg","footer","marginTop","Index","actNow","articles","criteria","navigation","partners","promiseStatuses","promises","projectMeta","keyPromises","promisesByStatus","subscribe","props","classes","name","position","promiseLabel","updatedAtLabel","trailText","Date","updatedAt","toDateString","dateStyle","split","slice","join","description","propTypes","shape","arrayOf","string","defaultProps","undefined","getStaticProps","locale","_","locales","includes","notFound","wpApi","page","pages","slug","first","checkApi","team","limit","query","posts","languageAlternates","revalidate"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Hero from \"@/promisetracker/components/Hero\";\nimport ActNow from \"@/promisetracker/components/ActNow\";\nimport KeyPromises from \"@/promisetracker/components/KeyPromises\";\nimport LatestArticles from \"@/promisetracker/components/LatestArticles\";\nimport LatestPromises from \"@/promisetracker/components/LatestPromises\";\nimport Page from \"@/promisetracker/components/Page\";\nimport Partners from \"@/promisetracker/components/Partners\";\nimport Subscribe from \"@/promisetracker/components/Newsletter\";\n\nimport check from \"@/promisetracker/lib/check\";\nimport i18n from \"@/promisetracker/lib/i18n\";\nimport wp from \"@/promisetracker/lib/wp\";\nimport { groupPromisesByStatus } from \"@/promisetracker/utils\";\n\nconst useStyles = makeStyles(({ breakpoints, typography, widths }) => ({\n  section: {\n    padding: `0 ${typography.pxToRem(23)}`,\n    margin: 0,\n    width: \"100%\",\n    [breakpoints.up(\"lg\")]: {\n      padding: 0,\n      margin: \"0 auto\",\n      width: typography.pxToRem(widths.values.lg),\n    },\n  },\n  footer: {\n    marginTop: 0,\n  },\n}));\n\nfunction Index({\n  actNow,\n  articles,\n  criteria,\n  footer,\n  navigation,\n  partners,\n  promiseStatuses,\n  promises,\n  projectMeta,\n  keyPromises,\n  promisesByStatus,\n  subscribe,\n  ...props\n}) {\n  const classes = useStyles(props);\n  return (\n    <Page\n      {...props}\n      footer={footer}\n      navigation={navigation}\n      classes={{ section: classes.section, footer: classes.footer }}\n    >\n      <Hero\n        promisesByStatus={promisesByStatus}\n        criteria={criteria}\n        name={projectMeta.name}\n        position={projectMeta.position}\n        promiseLabel={projectMeta.promiseLabel}\n        updatedAtLabel={projectMeta.updatedAtLabel}\n        trailText={projectMeta.trailText}\n        updatedAt={new Date(projectMeta.updatedAt)\n          .toDateString({\n            dateStyle: \"short\",\n          })\n          .split(\" \")\n          .slice(1)\n          .join(\" \")}\n        title={projectMeta.description}\n        classes={{ section: classes.section }}\n      />\n      <KeyPromises\n        actionLabel=\"Learn More\"\n        items={keyPromises}\n        title=\"Key Promises\"\n        classes={{\n          section: classes.section,\n        }}\n      />\n      <LatestPromises\n        actionLabel=\"See All\"\n        items={promises.slice(0, 6)}\n        title=\"Latest Promises\"\n        classes={{\n          section: classes.section,\n        }}\n      />\n      <ActNow\n        {...actNow}\n        classes={{\n          section: classes.section,\n        }}\n      />\n      <LatestArticles\n        actionLabel=\"See All\"\n        items={articles}\n        title=\"Latest Articles\"\n        classes={{\n          section: classes.section,\n        }}\n      />\n      <Partners\n        {...partners}\n        title=\"Partners\"\n        classes={{\n          section: classes.section,\n        }}\n      />\n      <Subscribe\n        {...subscribe}\n        classes={{\n          section: classes.section,\n        }}\n      />\n    </Page>\n  );\n}\n\nIndex.propTypes = {\n  actNow: PropTypes.shape({}),\n  articles: PropTypes.arrayOf(PropTypes.shape({})),\n  criteria: PropTypes.shape({}),\n  footer: PropTypes.shape({}),\n  navigation: PropTypes.shape({}),\n  partners: PropTypes.shape({}),\n  projectMeta: PropTypes.shape({\n    name: PropTypes.string,\n    position: PropTypes.string,\n    trailText: PropTypes.string,\n    updatedAt: PropTypes.string,\n    updatedAtLabel: PropTypes.string,\n    description: PropTypes.string,\n    promiseLabel: PropTypes.string,\n  }),\n  promiseStatuses: PropTypes.arrayOf(PropTypes.shape({})),\n  promises: PropTypes.arrayOf(PropTypes.shape({})),\n  keyPromises: PropTypes.arrayOf(PropTypes.shape({})),\n  promisesByStatus: PropTypes.arrayOf(PropTypes.shape({})),\n  subscribe: PropTypes.shape({}),\n};\n\nIndex.defaultProps = {\n  actNow: undefined,\n  articles: undefined,\n  criteria: undefined,\n  footer: undefined,\n  navigation: undefined,\n  partners: undefined,\n  promiseStatuses: undefined,\n  promises: undefined,\n  keyPromises: undefined,\n  promisesByStatus: undefined,\n  subscribe: undefined,\n  projectMeta: undefined,\n};\n\nexport async function getStaticProps({ locale }) {\n  const _ = i18n();\n  // Skip generating pages for unsupported locales\n  if (!_.locales.includes(locale)) {\n    return {\n      notFound: true,\n    };\n  }\n  const wpApi = wp();\n  const page = await wpApi.pages({ slug: \"index\", locale }).first;\n  const { promiseStatuses } = page;\n  const checkApi = check({\n    promiseStatuses,\n    team: \"pesacheck-promise-tracker\",\n  });\n  const promises = await checkApi.promises({\n    limit: 10000,\n    query: `{ \"projects\": [\"2831\"] }`,\n  });\n  const keyPromises = await checkApi.promises({\n    limit: 6,\n    query: `{ \"projects\": [\"4691\"] }`,\n  });\n  const posts = await wpApi.pages({ slug: \"analysis-articles\", locale }).posts;\n  const articles = posts?.slice(0, 4) || null;\n  const projectMeta = await checkApi.projectMeta();\n  const languageAlternates = _.languageAlternates();\n\n  return {\n    props: {\n      ...page,\n      articles,\n      keyPromises,\n      languageAlternates,\n      promises: promises.slice(0, 6),\n      promisesByStatus: groupPromisesByStatus(promises),\n      projectMeta,\n    },\n    revalidate: 2 * 60, // seconds\n  };\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}